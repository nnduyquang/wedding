$(document).ready(function(){function e(){var e=location.href,t=e.substring(0,e.indexOf("/",14));if(t.indexOf("http://localhost")!=-1){var e=location.href,i=location.pathname,a=e.indexOf(i),n=e.indexOf("/",a+1),r=e.substr(0,n);return r+"/"}return t+"/"}var t=$('meta[name="csrf-token"]').attr("content");$.ajax({type:"POST",url:"services",data:{_token:t,data:"getimage"},success:function(t){var a,n=e();a+=" <option data-img-src='"+n+t[0]+"' data-img-alt='Page'1 value='1'>  Page 1  </option>";var r=1;for(i=1;i<t.length-1;i++)r+=i,a+=" <option data-img-src='"+n+t[i]+"' data-img-alt='Page'"+r+" value='"+r+"'>  Page "+r+"  </option>";a+=" <option data-img-src='"+n+t[t.length-1]+"' data-img-alt='Page'"+t.length+" value='"+t.length+"'>  Page "+t.length+"  </option>",$("#container-image .image-picker").html(a),$("select").imagepicker({clicked:function(){$("input[name='txticon']").val($(this).find("option[value='"+$(this).val()+"']").data("img-src").replace(n,"").replace(/^.*(\\|\/|\:)/,"")),$("input[name='srcIcon']").val($(this).find("option[value='"+$(this).val()+"']").data("img-src").replace(n,"")),$("input[name='fileName']").val($(this).find("option[value='"+$(this).val()+"']").data("img-src").replace(n,"").replace(/^.*(\\|\/|\:)/,""))}})}}),$("#checkAll").change(function(){$("input:checkbox").prop("checked",$(this).prop("checked"))}),$("button#openUpdateModalService").click(function(){$.ajax({type:"POST",url:"services",dataType:"json",data:{_token:t,data:"getDetailService",id:$(this).data("id")},success:function(e){e.success&&($("#submit-confirm-update input[name='txtsevice']").val(e.data.name),$("#submit-confirm-update input[name='srcIcon']").val(e.data.icon),$("#submit-confirm-update input[name='txticon']").val(e.data.icon.replace(/^.*(\\|\/|\:)/,"")),$("#submit-confirm-update input[name='txtorder']").val(e.data.order),$("#submit-confirm-update input[name='idService']").val(e.data.id_service))},error:function(e){alert("error")}}),$("#submit-confirm-update").modal()}),$("button#updateService").click(function(){var e=$("#submit-confirm-update input[name='txtsevice']").val(),i=$("#submit-confirm-update input[name='srcIcon']").val(),a=$("#submit-confirm-update input[name='txtorder']").val(),n=$("#submit-confirm-update input[name='idService']").val();$.ajax({type:"POST",url:"services",dataType:"json",data:{_token:t,data:"updateService",txtsevice:e,srcIcon:i,txtorder:a,id:n},success:function(e){e.success?location.reload():($("#submit-confirm-update .notics#errtxtService p").html(""),$("#submit-confirm-update .notics#errsrcIcon p").html(""),$("#submit-confirm-update .notics#errtxtService p").html(e.errors.txtsevice),$("#submit-confirm-update .notics#errsrcIcon p").html(e.errors.srcIcon),$("#submit-confirm-update .notics#errtxtorder p").html(e.errors.txtorder),$("#submit-confirm-update #errtxtService").fadeIn().delay(3e3).fadeOut(),$("#submit-confirm-update #errsrcIcon").fadeIn().delay(3e3).fadeOut(),$("#submit-confirm-update #errtxtorder").fadeIn().delay(3e3).fadeOut())},error:function(e){alert("zo error")}})}),$("button#openInsertModalService").click(function(){$("#submit-confirm-insert input[name='txticon']").val(""),$("#submit-confirm-insert input[name='srcIcon']").val(""),$("#submit-confirm-insert input[name='fileName']").val(""),$("#submit-confirm-insert input[name='txtsevice']").val(""),$("#submit-confirm-insert input[name='txtorder']").val(""),$("#submit-confirm-insert").modal()}),$("button#insertService").click(function(){var e=$("#submit-confirm-insert input[name='txtsevice']").val(),i=$("#submit-confirm-insert input[name='srcIcon']").val(),a=$("#submit-confirm-insert input[name='txtorder']").val();$.ajax({type:"POST",url:"services",dataType:"json",data:{_token:t,data:"insertService",txtsevice:e,srcIcon:i,txtorder:a},success:function(e){e.success?location.reload():($("#submit-confirm-insert .notics#errtxtService p").html(""),$("#submit-confirm-insert .notics#errsrcIcon p").html(""),$("#submit-confirm-insert .notics#errtxtService p").html(e.errors.txtsevice),$("#submit-confirm-insert .notics#errsrcIcon p").html(e.errors.srcIcon),$("#submit-confirm-insert .notics#errtxtorder p").html(e.errors.txtorder),$("#submit-confirm-insert #errtxtService").fadeIn().delay(3e3).fadeOut(),$("#submit-confirm-insert #errsrcIcon").fadeIn().delay(3e3).fadeOut(),$("#submit-confirm-insert #errtxtorder").fadeIn().delay(3e3).fadeOut())},error:function(e){alert("zo error")}})}),$("button#deleteService").click(function(){var e=$("input:checkbox:checked").map(function(){return this.value}).toArray();$.ajax({type:"POST",url:"services",dataType:"json",data:{_token:t,data:"deleteService",checkboxlist:e},success:function(e){e.success&&location.reload()},error:function(e){alert("zo error")}})}),$("#openIconModalService").click(function(){$("#submit-confirm-icon").modal()}),$("#input-file").fileinput({allowedFileExtensions:["jpeg","jpg","png"],uploadAsync:!0,showUploadedThumbs:!1,uploadUrl:e()+"/sml_admin/services",uploadExtraData:{_token:t,data:"uploadImage"}}),$("#input-file").on("fileuploaded",function(a,n,r,c){var o=(n.form,n.files,n.extra,n.response.success);n.reader;o&&$.ajax({type:"POST",url:"services",data:{_token:t,data:"getimage"},success:function(t){var a,n=e();a+=" <option data-img-src='"+n+t[0]+"' data-img-alt='Page'1 value='1'>  Page 1  </option>";var r=1;for(i=1;i<t.length-1;i++)r+=i,a+=" <option data-img-src='"+n+t[i]+"' data-img-alt='Page'"+r+" value='"+r+"'>  Page "+r+"  </option>";a+=" <option data-img-src='"+n+t[t.length-1]+"' data-img-alt='Page'"+t.length+" value='"+t.length+"'>  Page "+t.length+"  </option>",$("#container-image .image-picker").html(a),$("select").imagepicker({clicked:function(){$("input[name='txticon']").val($(this).find("option[value='"+$(this).val()+"']").data("img-src").replace(n,"").replace(/^.*(\\|\/|\:)/,"")),$("input[name='srcIcon']").val($(this).find("option[value='"+$(this).val()+"']").data("img-src").replace(n,"")),$("input[name='fileName']").val($(this).find("option[value='"+$(this).val()+"']").data("img-src").replace(n,"").replace(/^.*(\\|\/|\:)/,""))}})}})})});